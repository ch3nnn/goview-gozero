var v=(m,c,a)=>new Promise((_,o)=>{var r=t=>{try{i(a.next(t))}catch(s){o(s)}},e=t=>{try{i(a.throw(t))}catch(s){o(s)}},i=t=>t.done?_(t.value):Promise.resolve(t.value).then(r,e);i((a=a.apply(m,c)).next())});import{d as j,j as d,aM as h,b9 as I,a1 as N,aF as R,r as u,o as T,D as b,w as p,b as l,u as k,e as B,Q as E,n as M,t as U,U as x,bb as z,ad as A,R as D,a9 as F,h as V}from"./index-312a31dd.js";import{i as J}from"./icon-ce016406.js";import{u as K,E as O,P as H}from"./chartEditStore-32c50897.js";import{u as L}from"./project.api-bec812dd.js";import{u as Q}from"./useSync.hook-4d532843.js";import"./plugin-aa00071a.js";import"./chartLayoutStore-a3dfb071.js";import"./index-5e1011db.js";import"./SettingItem-dba63559.js";/* empty css                                                                      */import"./SettingItemBox-19ac3d74.js";import"./CollapseItem.vue_vue_type_script_setup_true_lang-da631111.js";import"./index.esm.min-f20ed2aa.js";import"./fileTypeEnum-21359a08.js";const $={class:"title"},q=j({__name:"index",setup(m){const c=K(),{dataSyncUpdate:a}=Q(),{FishIcon:_}=J.ionicons5,o=d(!1),r=d(null),e=d(h());I(()=>{e.value=c.getProjectInfo.projectName||""});const i=N(()=>{e.value=e.value.replace(/\s/g,"");const n=e.value.length?e.value:"新项目";return R(`工作空间-${n}`),c.setEditCanvasConfig(O.PROJECT_NAME,n),n}),t=()=>{o.value=!0,A(()=>{r.value&&r.value.focus()})},s=()=>v(this,null,function*(){o.value=!1,c.setProjectInfo(H.PROJECT_NAME,e.value||"");const n=yield L({id:h(),projectName:e.value});n&&n.code===D.SUCCESS?a():F()});return(n,f)=>{const C=u("n-icon"),y=u("n-button"),w=u("n-text"),S=u("n-input"),g=u("n-space");return T(),b(g,null,{default:p(()=>[l(C,{size:"20",depth:3},{default:p(()=>[l(k(_))]),_:1}),l(w,{onClick:t},{default:p(()=>[B(" 工作空间 - "),E(l(y,{secondary:"",size:"tiny"},{default:p(()=>[M("span",$,U(i.value),1)]),_:1},512),[[x,!o.value]])]),_:1}),E(l(S,{ref_key:"inputInstRef",ref:r,size:"small",type:"text",maxlength:"16","show-count":"",placeholder:"请输入项目名称",value:e.value,"onUpdate:value":f[0]||(f[0]=P=>e.value=P),valueModifiers:{trim:!0},onKeyup:z(s,["enter"]),onBlur:s},null,8,["value"]),[[x,o.value]])]),_:1})}}});const le=V(q,[["__scopeId","data-v-4af849d3"]]);export{le as default};
